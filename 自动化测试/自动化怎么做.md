## 自动化的底层逻辑

我们经常做接口自动化和UI自动化

其实他们的底层逻辑是一样的，只不过一个被测对象是http接口，一个被测对象是UI页面

所以其实，如果我们把自动化的模块抽象出来，先抽象为大的几个模块

data：放业务数据，如测试用例数据

utils：放工具类

tests：放测试用例集

report：放allure报告

main.sh：入口函数



这样其实就是一个最基础的框架，而不同的项目，我们就在这个之上，case by case去思考，符合当前项目的实现

比如：http接口测试的话，data层可能有不同的实现，可能是yaml文件管理，也可能是前端页面通过UI的操作，保存case到数据库中，data层从数据库中获取到测试用例，也可能是直接自动化读取swagger文档解析成的测试用例，不同项目不同的成员水平，我们的实现逻辑可以不一样

上面的说法，我们可以感觉出来，不同的实现方案侧重点都在测试数据上，这种设计模式就叫做【数据驱动】

这是为了和其他的设计模型相比较，其实设计模式不重要，底层逻辑一致，只不过是抽象的层和对象不一样而已

而如果我们开始经常性的设计框架的话，框架设计的原则是：你是框架的主人，框架的难易由你来把控，你可以写的更灵活，也可以不灵活，框架使用者是需要follow框架设计者的

在一点之前就是，在架构设计上，没有加一层解决不了的问题，如果有那就加两层

这里就引出了UI自动化

我们发现，UI自动化对于接口自动化来说，需要抽象的对象增加了

接口自动化抽象的对象只需要是单个接口就行，而UI自动化，如果我们抽象的对象划分的不好，就很容易导致后期UI稍有变动，我们的case就需要大变动，以后自动化用例在变更时，不好管理和维护

所以，这时候，按照架构的经典思考维度，那就先加一层试试

这就是我们常说的PO模式，Page Object模式

就是把page抽象为对象，一个页面对象中维护找个页面里各个元素和操作方法

这其实就是增加一层，一个page层,ok,那我们就在上面的几个模块上再加一个page模块

就变为：

data：放业务数据，如测试用例数据

page：存放页面对象，一个py文件一个页面，每个页面对象里封装这个页面里的元素和方法

utils：放工具类

tests：放测试用例集

report：放allure报告

main.sh：入口函数



然后在结合我们的数据驱动模式，同样，我们可以把用例放在excel中、yaml中进行导入和管理，继续放在data模块下即可

test中构读取我们的data 或者是 直接由data解析为test即可



对于UI自动化，我们可以在data层划分一下





### 什么产品、什么阶段适合做自动化？	

​	本来在下笔之前，还想着分析一下当前产品是否适合做自动化，当前团队是否适合做等等，这是我以前的思维方式，但是就在这篇文章的时候，就是在一开始写各种评估现在是否适合做的时候，我突然难道评估的结果是不适合就不做了吗？难道一定要等所谓的合适的时机在做吗？这样可能一直都无法开始、更别说什么完成了，切记：【完成大于完美】。

​	所以，我们就开始干，就把这个自动化给它推起来。

### 面临的问题

​	大家被自动化劝退的原因可能是一上手就要搞个完整版，高大上版，各种兼容，各种功能，结果自己把自己先吓住了，duck不必，我觉得推自动化的第一步就是先推大家的自动化意识，有这个自动化意识了，就像车子开始启动了，已经克服那个最难的阶段，剩下的只需要小小的push就行。

​	而首先我们聊聊如何推动大家有自动化的意识，其实大部分的人心中都是想干的，想自己搞一套牛轰轰的自动化框架、平台的，但为什么绝大部分没有做呢？分析一下原因主要有：

​	1.空有想自动化的心不知道哪里可以自动化

​	2.发现了可以自动化的地方但是不知道如何实现

​	3.代码能力较差，无法完成编码或者是编码“变现”时间太长，无法体现效果

对于以上的3点，我们针对性的分析一下：

​	1.要么是没有自动化思维，要么是公司有自动化或者测开团队，留给普通功能测试的机会较少，或者是对自动化的认识很局限，只限于什么UI自动化、接口自动化、搭建测试平台等这样的“自动化”

​	2.这个就是简单的没有要么代码能力薄弱，要么是扩展不足，不知道市面上其实有很多好的工具、平台、框架可以借鉴他们的一部分功能、或者借鉴别人的思维方式，比如我就是通过HttpRunner的框架思维方式优化了我的PO结构里的测试步骤驱动

​	3.emmm，没啥好说的，很直接，学啊

### 问题的解决方法：

对于以上3点的改进方法呢？

​	1.先要知道自动化不止能做那些事，自动化可以是任何的地方，比如每天发日报觉得很烦，那就写一个自动化的脚本帮你自动填写，自动发送什么的，或者是造某些测试数据很麻烦，那就通过写这个造数据常见的接口或者UI自动化，甚至你有可以写一个自动化的抢月饼脚本是吧，但一定要记得设定条件。只要是有重复劳动的、或者是不重复但是你嫌麻烦的，都可以自动化，让机器帮你搞定

​	2.这个嘛，就多看看论坛，看看现在大家在用什么工具，拿来试用一下，试用的过程中体会能被我们说摄取的优秀的有用的点

​	3.一个字【练】，但是其实强调一点，自动化不是说一定要代码的，一些好用的工具就比如postman这类的，不需要代码基础，但是也可以做接口自动化，在代码不行的时候，可以通过一些工具来辅助，来建立自己的自动化思维，同时学习代码能力，这里也要提醒，不用等待学的代码大成在去实践，如果心态好的话，完全可以边学边做，边做边学，这个方法很多但是大多数人坚持不下去，毕竟太打击人自信心了，那就选一个工具先上手，其实一般的工具也是有稍微的代码编写的，比如postman就是js、jmeter就是java和beanshell。边用边学，警惕不要掉到工具的舒适圈里的就行

### 如何落实开展

​	通过上面的分析，大家对自动化的心里畏惧应该差不多消了，然后我们就开始上手了，但是这里的上手不是说就开始撸代码了，而是我们可以开始做选型工作了，我们要选择语言、框架，这里就要结合一些因素，比如：

​	1.产品是什么代码编写的

​	2.测试团队成员的语言基础

​	其实感觉现在也没啥好选的，语言也就java或者python，框架的话自动化就是老2样：selenium、appium，接口的话，可能稍微多点，但是可能也就选择语言自带的一些库自己封装了，如果达不到这样的，那就选择别人已经封装好的框架直接调用，现在市面上主流的框架是httpRunner，其他的各类框架百度一大把，随便选，这里的建议是如果要见效很快的那就选择已经封装好的框架，这类的话上手最多也就2-3天吧，如果不是那么着急，还是自己封装吧，毕竟自己开发的才是最适合自己的

一般的QA的心里工作还是挺好做的

其他人的话，比如PM、dev、非测试领导等，可能会担心做自动化会占用本身测试的时间，说明要么不占用排期内的QA人力，要么就说占用一小部分人力，但是我们的投入是有价值的，以后可以节约多少人力，巴拉巴拉。这时，涉及到我们做自动化的一个关键问题了，如何量化我们的投入产出？通俗说就是如何证明你做这个是有用的，别到时候人力也话了，代码一箩筐，各路人马配合你，结果你搞出来的这个既不能节省出QA的人力反而要QA来话更多的精力维护、排错，甚至你这个自动化连个bug都发现不出来，那就白扯了，没人会继续赞同你搞这个的。

​	接下来就建议：选择最好的最简单的先出一版



## 

